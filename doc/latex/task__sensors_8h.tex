\hypertarget{task__sensors_8h}{\section{task\-\_\-sensors.\-h File Reference}
\label{task__sensors_8h}\index{task\-\_\-sensors.\-h@{task\-\_\-sensors.\-h}}
}


This file contains \#defines and function declarations for the A\-D\-Cs, joystick and buttons.  


\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{task__sensors_8h_a7cd80602ab49fbcdf216f42ff892cda1}{\#define {\bfseries S\-I\-Z\-E\-\_\-\-S\-E\-N\-S\-O\-R\-S\-\_\-\-Q\-U\-E\-U\-E}~30}\label{task__sensors_8h_a7cd80602ab49fbcdf216f42ff892cda1}

\item 
\hypertarget{task__sensors_8h_a9542ce3f2fff988c6f5fa988f1b59739}{\#define {\bfseries S\-T\-A\-C\-K\-\_\-\-S\-I\-Z\-E\-\_\-\-S\-E\-N\-S\-O\-R\-S}~280}\label{task__sensors_8h_a9542ce3f2fff988c6f5fa988f1b59739}

\item 
\hypertarget{task__sensors_8h_a901bea3adce3299b8bc28f695c240539}{\#define {\bfseries A\-D\-C\-\_\-\-J\-O\-Y\-S\-T\-I\-C\-K\-\_\-\-X}~0x07}\label{task__sensors_8h_a901bea3adce3299b8bc28f695c240539}

\item 
\hypertarget{task__sensors_8h_a72b91ac0b138577781c9122aa331ba6b}{\#define {\bfseries A\-D\-C\-\_\-\-J\-O\-Y\-S\-T\-I\-C\-K\-\_\-\-Y}~0x06}\label{task__sensors_8h_a72b91ac0b138577781c9122aa331ba6b}

\item 
\hypertarget{task__sensors_8h_a6afebd9146356824a449f710cda6e6a5}{\#define {\bfseries B\-T\-N\-\_\-\-O\-N\-\_\-\-T\-H\-R\-E\-S\-H\-H\-O\-L\-D}~5}\label{task__sensors_8h_a6afebd9146356824a449f710cda6e6a5}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{task__sensors_8h_ae2fe3586205b745ad1842cf7a40bb668}{task\-\_\-sensors} (void $\ast$pv\-Parameters)
\begin{DoxyCompactList}\small\item\em This is the task function for monitoring the button and joysticks. \end{DoxyCompactList}\item 
void \hyperlink{task__sensors_8h_a2b815e6730e8723a6d1d06d9ef8f31c0}{adc\-\_\-init} (void)
\begin{DoxyCompactList}\small\item\em This Function prompts the A\-V\-R I2\-C device to read one or more bytes. \end{DoxyCompactList}\item 
uint16\-\_\-t \hyperlink{task__sensors_8h_a67d34c1378ba0871293df7b6a387de60}{adc\-\_\-read} (uint8\-\_\-t adc\-\_\-channel)
\begin{DoxyCompactList}\small\item\em This Function reads a byte from the selected A\-D\-C channel. \end{DoxyCompactList}\item 
uint8\-\_\-t \hyperlink{task__sensors_8h_ad30f80427ce3db3bd84450d9b882eabf}{button\-\_\-pressed} (void)
\begin{DoxyCompactList}\small\item\em This Function detects whether or not a button has been pressed. \end{DoxyCompactList}\item 
\hypertarget{task__sensors_8h_a9ebb64bc3ea7a1e75d422784fe931347}{void \hyperlink{task__sensors_8h_a9ebb64bc3ea7a1e75d422784fe931347}{button\-\_\-init} (void)}\label{task__sensors_8h_a9ebb64bc3ea7a1e75d422784fe931347}

\begin{DoxyCompactList}\small\item\em This function initializes the \char`\"{}\-Target Set\char`\"{} button. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This file contains \#defines and function declarations for the A\-D\-Cs, joystick and buttons. Revisions\-: \begin{DoxyItemize}
\item 11-\/27-\/2014 J\-F, M\-L, J\-R created original file\end{DoxyItemize}
License\-: This file is copyright 2012 by J\-F, M\-L, J\-R and released under the Lesser G\-N\-U Public License, version 2. It intended for educational use only, but its use is not limited thereto. 

Definition in file \hyperlink{task__sensors_8h_source}{task\-\_\-sensors.\-h}.



\subsection{Function Documentation}
\hypertarget{task__sensors_8h_a2b815e6730e8723a6d1d06d9ef8f31c0}{\index{task\-\_\-sensors.\-h@{task\-\_\-sensors.\-h}!adc\-\_\-init@{adc\-\_\-init}}
\index{adc\-\_\-init@{adc\-\_\-init}!task_sensors.h@{task\-\_\-sensors.\-h}}
\subsubsection[{adc\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void adc\-\_\-init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{task__sensors_8h_a2b815e6730e8723a6d1d06d9ef8f31c0}


This Function prompts the A\-V\-R I2\-C device to read one or more bytes. 

This Function prompts the I2\-C device to read data from the I2\-C data lines in master receiver mode. If the argument \char`\"{}lastbit\char`\"{} is 0, then after receiving the last byte of information, the acknowledge bit is not pulled low -\/ this indicates the end of the transmission. If \char`\"{}lastbit\char`\"{} is set to 1, the acknowledge bit will be sent, and the I2\-C device will continue to read data.


\begin{DoxyParams}{Parameters}
{\em lastbit} & This tells the function whether or not pull the i2c/twi data lines low for an \char`\"{}\-A\-C\-K\char`\"{} condition. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns the single byte of recieved data.\-This function initializes the A\-D\-C on the A\-T\-M\-E\-G\-A 1284p. 
\end{DoxyReturn}


Definition at line 56 of file task\-\_\-sensors.\-c.



Referenced by task\-\_\-sensors().

\hypertarget{task__sensors_8h_a67d34c1378ba0871293df7b6a387de60}{\index{task\-\_\-sensors.\-h@{task\-\_\-sensors.\-h}!adc\-\_\-read@{adc\-\_\-read}}
\index{adc\-\_\-read@{adc\-\_\-read}!task_sensors.h@{task\-\_\-sensors.\-h}}
\subsubsection[{adc\-\_\-read}]{\setlength{\rightskip}{0pt plus 5cm}uint16\-\_\-t adc\-\_\-read (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{adc\-\_\-channel}
\end{DoxyParamCaption}
)}}\label{task__sensors_8h_a67d34c1378ba0871293df7b6a387de60}


This Function reads a byte from the selected A\-D\-C channel. 


\begin{DoxyParams}{Parameters}
{\em adc\-\_\-channel} & Takes one of the \#define macros from \hyperlink{task__sensors_8h}{task\-\_\-sensors.\-h} as a parameter, for the purpose of selecting one of the A\-D\-C channels. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns and unsigned 16bit data value. 
\end{DoxyReturn}
Use a mutex to control access to the A\-D\-C. 

Definition at line 71 of file task\-\_\-sensors.\-c.



Referenced by task\-\_\-safety(), and task\-\_\-sensors().

\hypertarget{task__sensors_8h_ad30f80427ce3db3bd84450d9b882eabf}{\index{task\-\_\-sensors.\-h@{task\-\_\-sensors.\-h}!button\-\_\-pressed@{button\-\_\-pressed}}
\index{button\-\_\-pressed@{button\-\_\-pressed}!task_sensors.h@{task\-\_\-sensors.\-h}}
\subsubsection[{button\-\_\-pressed}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t button\-\_\-pressed (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{task__sensors_8h_ad30f80427ce3db3bd84450d9b882eabf}


This Function detects whether or not a button has been pressed. 

This function performs a software debounce, and updates a shared variable(btn\-\_\-\-S\-H\-A\-R\-E\-D) when a level change is detected, indicating that the button has been pressed. \begin{DoxyReturn}{Returns}
Returns the status of the button level. 
\end{DoxyReturn}


Definition at line 99 of file task\-\_\-sensors.\-c.



Referenced by task\-\_\-sensors().

\hypertarget{task__sensors_8h_ae2fe3586205b745ad1842cf7a40bb668}{\index{task\-\_\-sensors.\-h@{task\-\_\-sensors.\-h}!task\-\_\-sensors@{task\-\_\-sensors}}
\index{task\-\_\-sensors@{task\-\_\-sensors}!task_sensors.h@{task\-\_\-sensors.\-h}}
\subsubsection[{task\-\_\-sensors}]{\setlength{\rightskip}{0pt plus 5cm}void task\-\_\-sensors (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pv\-Parameters}
\end{DoxyParamCaption}
)}}\label{task__sensors_8h_ae2fe3586205b745ad1842cf7a40bb668}


This is the task function for monitoring the button and joysticks. 

This function monitors the \char`\"{}\-Target Set\char`\"{} button, and when it is pressed, updates shared variables \char`\"{}motor1\-\_\-power\-\_\-\-S\-H\-A\-R\-E\-D\char`\"{}, and \char`\"{}motor2\-\_\-power\-\_\-\-S\-H\-A\-R\-E\-D\char`\"{} with adc\-\_\-channel readings. If the button is N\-O\-T pressed, the motor power shareds are set to the effective \char`\"{}zero power\char`\"{} value of 512.(1024 adc values corresponding to full forward(1023), and full reverse(0); 

Definition at line 159 of file task\-\_\-sensors.\-c.



References adc\-\_\-init(), adc\-\_\-read(), button\-\_\-init(), and button\-\_\-pressed().



Referenced by main().

